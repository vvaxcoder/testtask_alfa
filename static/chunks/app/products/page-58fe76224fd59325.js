(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[571],{79:(e,t,s)=>{"use strict";s.d(t,{K:()=>i});let i=(0,s(5453).v)(e=>({products:[],favorites:new Set,fetchProducts:async()=>{let t=await fetch("https://fakestoreapi.com/products"),s=await t.json();e(e=>({products:0===e.products.length?e.products=s:e.products}))},toggleFavorite:t=>e(e=>{let s=new Set(e.favorites);return s.has(t)?s.delete(t):s.add(t),{favorites:s}}),removeProduct:t=>e(e=>({products:e.products.filter(e=>e.id!==t)})),addProduct:t=>e(e=>({products:[...e.products,{...t,id:Date.now()}]}))}))},1057:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>C});var i=s(5155),r=s(6467),l=s(2294),n=s(3324),a=s(662),d=s(8426),o=s(9122),c=s(6590),p=s(6996),h=s(5069),u=s(9622),f=s(6170),x=s(2115),g=s(6874),y=s.n(g),j=s(6766),m=s(5695);s(9911),s(6972);var v=s(79);function C(){let e=(0,m.useRouter)(),{favorites:t,products:s,fetchProducts:g,toggleFavorite:C,removeProduct:w}=(0,v.K)(),[A,k]=(0,x.useState)(!1),[b,S]=(0,x.useState)(""),[_,P]=(0,x.useState)(1),[T,E]=(0,x.useState)(!0);if((0,x.useEffect)(()=>{g().then(()=>E(!1))},[]),T)return(0,i.jsx)(r.A,{size:"large",style:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"}});let B=s.filter(e=>!A||t.has(e.id)).filter(e=>e.title.toLowerCase().includes(b.toLowerCase())),N=()=>{e.push("/create-product")};return(0,i.jsxs)("div",{style:{padding:20},children:[(0,i.jsx)(l.A.Search,{placeholder:"Поиск...",onChange:e=>S(e.target.value),style:{marginBottom:20}}),(0,i.jsx)(n.A,{checked:A,onChange:k,checkedChildren:"Избранное",unCheckedChildren:"Все",style:{marginBottom:20}}),(0,i.jsx)(a.Ay,{type:"primary",icon:(0,i.jsx)(p.A,{}),onClick:()=>N(),style:{marginBottom:2,float:"right"},children:"Добавить новый продукт"}),(0,i.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:20,padding:"0 30px"},children:B.slice((_-1)*6,6*_).map(e=>(0,i.jsx)(y(),{href:"/products/".concat(e.id),passHref:!0,children:(0,i.jsxs)(d.A,{hoverable:!0,style:{display:"flex",flexDirection:"column",justifyContent:"space-between"},cover:(0,i.jsx)(j.default,{src:e.image,height:150,width:150,alt:e.title}),children:[(0,i.jsx)(o.A.Text,{ellipsis:!0,style:{minHeight:50,width:240,display:"block"},children:e.title}),(0,i.jsxs)("div",{style:{fontWeight:"bold",display:"flex",justifyContent:"space-between",marginTop:0},children:[(0,i.jsx)("span",{children:"Price"}),(0,i.jsx)("span",{children:e.price})]}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:10},children:[(0,i.jsx)(a.Ay,{icon:t.has(e.id)?(0,i.jsx)(h.A,{style:{color:"red"}}):(0,i.jsx)(u.A,{}),onClick:()=>C(e.id)}),(0,i.jsx)(a.Ay,{icon:(0,i.jsx)(f.A,{}),onClick:()=>w(e.id),danger:!0})]})]})},e.id))}),(0,i.jsx)(c.A,{current:_,total:B.length,pageSize:6,onChange:P,style:{marginTop:20,textAlign:"center"}})]})}},1117:(e,t,s)=>{Promise.resolve().then(s.bind(s,1057))},6972:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[282,915,63,195,901,874,338,441,684,358],()=>t(1117)),_N_E=e.O()}]);